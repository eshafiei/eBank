<div class="card w-100">
  <h5 class="card-header">Create new account</h5>
  <div class="card-body">
    <mat-horizontal-stepper [linear]="isLinear" #stepper>
      <mat-step [stepControl]="personal">
        <form [formGroup]="form" novalidate>
          <ng-template matStepLabel>About you</ng-template>
          <div formGroupName="personal">
            <h3>Personal information</h3>
            <hr />
            <div class="row">        
                <mat-form-field class="col-5" appearance="outline">
                    <mat-label for="firstName">First name</mat-label>
                    <input matInput
                      type="text"
                      formControlName="firstName"
                      placeholder="First name">
                    <mat-error *ngIf="a.firstName?.hasError('required')">First name is required</mat-error>
                </mat-form-field>
              </div>
              <div class="row">
                <mat-form-field class="col-5" appearance="outline">
                    <mat-label for="lastName">Last name</mat-label>
                    <input matInput
                      type="text"
                      placeholder="Last name"
                      formControlName="lastName">
                    <mat-error *ngIf="a.lastName?.hasError('required')">Last name is required</mat-error>
                </mat-form-field>
              </div>
            <div>
              <button mat-stroked-button color="primary" class="mr-2 col-2" matStepperNext>Next</button>
            </div>
          </div>        
        </form>
      </mat-step>
      <mat-step [stepControl]="account">
          <form [formGroup]="form" novalidate>
            <ng-template matStepLabel>Account options</ng-template>
            <div formGroupName="account">
              <h3>Account information</h3>
              <hr />
              <div class="row">
                  <mat-form-field class="col-5" appearance="outline">
                    <mat-label for="accountType">Account type</mat-label>
                    <mat-select formControlName="accountType">
                      <mat-option
                        *ngFor="let item of accountTypeItems"
                        [value]="accountType[item]">
                        {{ item }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.accountType?.hasError('required')">Account type is required</mat-error>
                  </mat-form-field>
              </div>
              <div class="row">        
                <mat-form-field class="col-5" appearance="outline">
                    <mat-label>Account number</mat-label>
                    <input matInput
                      type="number"
                      formControlName="accountNumber"
                      placeholder="Account number"
                      [ngClass]="{'is-invalid': f.accountNumber.touched && f.accountNumber.errors}">
                    <mat-error *ngIf="f.accountNumber?.hasError('required')">Account number is required</mat-error>
                </mat-form-field>
              </div>
              <div class="row">
                <mat-form-field class="col-5" appearance="outline">
                    <mat-label for="balance">Initial balance</mat-label>
                    <input matInput
                      type="number"
                      placeholder="Initial balance"
                      formControlName="balance">
                </mat-form-field>
              </div>
              <div class="row mb-2">
                <section class="col-3">
                  <mat-checkbox formControlName="accountStatus">Enable account</mat-checkbox>
                </section>
              </div>
              <div>
                <button mat-stroked-button color="warn" class="mr-2 col-2" matStepperPrevious>Back</button>
                <button mat-stroked-button color="primary" class="mr-2 col-2" matStepperNext>Next</button>
              </div>
            </div>            
          </form>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Terms</ng-template>
          <form [formGroup]="form" novalidate>
            <div formGroupName="account">
              <h3>Account Terms & Conditions</h3>
              <hr />
              <div class="row mb-2">
                <p>AGREEMENT - This document, along with any other documents we give you pertaining to your account(s), is a contract that establishes rules, 
                  which control your account(s) with us. Please read this carefully. If you sign the signature card or open or continue to have your account with us, 
                  you agree to these rules. You will receive a separate schedule of rates, qualifying balances, and fees if they are not included in this document. 
                  If you have any questions, please call us.
                </p>
              </div>
              <div class="row mb-3">
                <section class="col-3">
                  <mat-checkbox formControlName="accountAgreement">I agree with all terms and conditions of this agreement.</mat-checkbox>
                </section>
              </div>
            </div>
          </form>         
          <div>
            <button mat-stroked-button color="warn" class="mr-2 col-2" matStepperPrevious>Back</button>
            <button mat-raised-button
              color="primary"
              class="mr-2 col-2"
              matStepperNext
              type="button"
              [disabled]="form.invalid"
              (click)="createAccount()">
              Create
            </button>
          </div>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Done</ng-template>
          Account created! You are now done.
          <div>
            <button mat-stroked-button 
              color="accent" 
              class="mr-2 col-2"
              [routerLink]="['/account']">
              Done
            </button>
          </div>
        </mat-step>
      </mat-horizontal-stepper>
      <pre>{{this.form.value | json}}</pre>
  </div>
</div>
